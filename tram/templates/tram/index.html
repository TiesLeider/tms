{% extends "tram/base.html" %}
{% block content %}
    {% for storing in storingen %}
        <div class="card white" id="storing_{{storing.id}}_card">
            <div class="card-content">
                <span class="activator grey-text text-darken-4"><u>{{storing.assetnummer.assetnummer}}</u>: 
                    {% for b in storing.storing_beschrijving %}
                    {{b}}, 
                    {% endfor %}
                    Tijdstip: {{storing.tijdstip}} 
                </span>
            </div>
        </div>
    {%endfor %}
{% endblock content%}

{% block javascript%}
    <script>
        function refresh(){
            location.href = window.location.href;
        }
        var aInterval = setInterval(refresh, 30000);
        window.onclick = function(){
            clearInterval(aInterval)
            aInterval = setInterval(refresh, 30000);;
        };

        function swalDeactiveerStoring(url){
            Swal.fire({
                title: 'Zeker weten?',
                text: "Door de storing te deactiveren worden geen nieuwe updates van deze storing getoond.",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Ja, deactiveren!'
              }).then((result) => {
                if (result.value) {
                        window.location = url;
                    }
                }
            )
        }
    </script>
{% endblock javascript%}